# POE2 交易市场助手

一个 Chrome 浏览器插件，用于记录 Path of Exile 2 交易市场的搜索历史，支持国际服和国服(腾讯)，让你轻松管理和回顾之前的搜索记录。

## 功能特性

-   🔍 **自动记录搜索**: 自动捕获并保存在 POE2 交易市场的所有搜索记录
-   📝 **页面内嵌面板**: 直接在交易页面右侧显示搜索历史，无需弹窗
-   🎯 **一键重搜**: 点击历史记录直接跳转到对应搜索结果
-   🕒 **智能时间显示**: 友好的时间显示格式（刚刚、几分钟前等）
-   🗑️ **记录管理**: 支持删除单条记录或清空所有历史
-   🎨 **POE 风格界面**: 采用 POE 游戏风格的深色主题设计
-   📱 **可拖拽面板**: 历史面板可以自由拖拽到任意位置
-   🔄 **实时同步**: 搜索记录实时保存和刷新
-   📊 **统计信息**: 显示搜索记录数量统计

## 安装方法

### 方法一：开发者模式安装（推荐）

1. 下载或克隆此项目到本地
2. 打开 Chrome 浏览器
3. 访问 `chrome://extensions/`
4. 开启右上角的"开发者模式"
5. 点击"加载已解压的扩展程序"
6. 选择项目文件夹 `poe2-trading-tencent`
7. 插件安装完成！

### 方法二：打包安装

1. 在扩展程序页面点击"打包扩展程序"
2. 选择项目文件夹，生成 `.crx` 文件
3. 将 `.crx` 文件拖拽到 Chrome 浏览器中安装

## 使用方法

1. **自动记录**: 访问 POE2 交易市场网站进行搜索，插件会自动记录你的搜索条件
    - 国际服: `pathofexile.com/trade` 或 `poe2.pathofexile.com/trade`
    - 国服: `poe.game.qq.com/trade2`
2. **历史面板**: 访问交易页面时，右侧会自动显示搜索历史面板
3. **面板控制**:
    - 🔄 刷新按钮：手动刷新历史记录
    - 🗑️ 清空按钮：清除所有搜索历史
    - 📋 切换按钮：收起/展开面板
    - 点击插件图标也可以切换面板显示
4. **快速搜索**: 在面板搜索框中输入关键词过滤历史记录
5. **一键重搜**: 点击历史记录项直接跳转到对应搜索结果
6. **拖拽定位**: 拖拽面板标题栏可以移动面板到任意位置
7. **删除记录**: 悬停在记录上点击"×"按钮删除单条记录

## 支持的网站

-   ✅ `https://www.pathofexile.com/trade*` (国际服)
-   ✅ `https://poe2.pathofexile.com/trade*` (国际服 POE2)
-   ✅ `https://poe.game.qq.com/trade2/*` (国服 POE2)

## 技术特性

-   **Manifest V3**: 使用最新的 Chrome 扩展 API
-   **本地存储**: 所有数据保存在本地，保护隐私
-   **智能去重**: 自动过滤重复的搜索记录
-   **定期清理**: 自动清理 30 天前的旧记录
-   **性能优化**: 限制最多保存 100 条记录，确保性能

## 文件结构

```
poe2-trading-tencent/
├── manifest.json          # 插件配置文件
├── background.js           # 后台服务脚本
├── content.js             # 内容脚本（注入网页）
├── popup/
│   ├── popup.html         # 弹出界面
│   └── popup.js           # 弹出界面逻辑
├── icons/
│   ├── icon16.png         # 16x16图标
│   ├── icon48.png         # 48x48图标
│   └── icon128.png        # 128x128图标
└── README.md              # 说明文档
```

## 开发说明

### 主要组件

1. **Content Script** (`content.js`)

    - 监听页面搜索行为
    - 提取搜索参数
    - 发送数据到后台脚本

2. **Background Script** (`background.js`)

    - 处理数据存储
    - 管理搜索历史
    - 定期清理旧数据

3. **Popup Interface** (`popup/`)
    - 显示搜索历史
    - 提供搜索和管理功能
    - 用户交互界面

### 数据格式

搜索记录格式：

```javascript
{
  id: "唯一标识符",
  url: "完整的搜索URL",
  params: {搜索参数对象},
  timestamp: "ISO时间戳",
  title: "页面标题",
  domain: "网站域名"
}
```

## 更新日志

### v1.0.0 (2025-09-16)

-   🎉 初始版本发布
-   ✨ 基本搜索记录功能
-   🎨 POE 风格界面设计
-   🔧 自动记录和管理功能

## 问题反馈

如果你在使用过程中遇到任何问题或有功能建议，请通过以下方式反馈：

1. 在项目中创建 Issue
2. 发送邮件描述问题
3. 提供详细的操作步骤和截图

## 许可证

本项目采用 MIT 许可证，详见 LICENSE 文件。

## 致谢

-   感谢 Path of Exile 社区的支持
-   参考了 Better PathOfExile Trading 插件的设计理念
-   使用了 Chrome Extensions API

---

**注意**: 本插件仅用于记录搜索历史，不会修改游戏数据或影响游戏平衡性。所有数据均保存在本地，不会上传到任何服务器。
