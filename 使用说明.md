# POE2 交易市场助手 - 使用说明

## 🎉 插件已正常工作！

恭喜！你的 POE2 交易市场助手现在已经完美运行，可以像 Better Trading 一样在页面中直接显示搜索历史。

## 🚀 主要功能

### 📝 自动记录搜索

-   ✅ 访问国服交易市场时自动记录搜索
-   ✅ 智能提取联盟名称（如：深渊崛起）
-   ✅ 自动保存搜索 ID 和 URL
-   ✅ 过滤无意义的默认参数

### 🎯 并排显示面板

-   ✅ 与交易页面并排显示，不遮挡内容
-   ✅ 智能布局调整，为插件自动留出空间
-   ✅ 侧边 toggle 按钮一键切换
-   ✅ 流畅滑动动画效果
-   ✅ 专为国服 POE2 优化

### 🔄 智能管理

-   ✅ 实时显示搜索历史
-   ✅ 点击记录直接跳转
-   ✅ 支持搜索过滤
-   ✅ 单条删除和批量清空

## 📋 使用步骤

### 1. 日常使用

1. 访问 `https://poe.game.qq.com/trade2`
2. 右侧会自动显示历史面板
3. 进行任何搜索，记录会自动保存
4. 点击历史记录可重新打开搜索

### 2. 面板控制

-   **🔄 刷新**：手动刷新历史记录
-   **🗑️ 清空**：删除所有搜索历史
-   **📋 切换**：收起/展开面板
-   **拖拽**：拖动标题栏移动面板

### 3. 记录管理

-   **快速搜索**：在面板搜索框输入关键词
-   **一键跳转**：点击记录在当前页面切换到搜索结果
-   **删除记录**：悬停记录点击"×"删除

## 🎨 界面特点

### 显示优化

-   ✅ **智能标题生成**：直接显示搜索的物品名称或类型
    -   物品名称搜索：`收缩指令 毒蝰帽`
    -   物品类型搜索：`弓`
    -   联盟搜索：`深渊崛起 - 交易搜索`
-   ✅ **智能去重**：相同搜索 ID 的记录会自动替换旧记录
-   ✅ **精简标签**：只显示联盟和搜索 ID 两个重要参数
-   ✅ **时间显示**：友好的时间格式（刚刚、几分钟前）

### 参数翻译

-   `league` → 联盟
-   `search_id` → 搜索 ID
-   其他参数保持原样显示

## 🔧 技术特性

### 数据存储

-   本地存储，保护隐私
-   最多保存 100 条记录
-   自动清理 30 天前的记录
-   **按搜索 ID 去重**：相同搜索会更新而不是重复保存

### 智能识别

-   **智能标题生成**：优先级为物品名称 > 物品类型 > 联盟搜索
-   **动态类型识别**：直接从页面 select 下拉框读取选中的物品类型
-   **搜索内容提取**：从主搜索框提取用户输入的物品名称

### 性能优化

-   异步加载，不影响页面性能
-   智能参数提取
-   实时更新显示
-   错误处理和恢复

## 📊 记录格式

每条搜索记录包含：

```json
{
    "id": "唯一标识符",
    "url": "完整搜索URL",
    "params": {
        "league": "深渊崛起",
        "search_id": "Pvw8YjGsL"
    },
    "timestamp": "2025-09-15T04:19:10.988Z",
    "title": "页面标题",
    "domain": "poe.game.qq.com"
}
```

## 🎯 使用技巧

1. **快速重搜**：点击历史记录比重新输入条件更快
2. **面板定位**：拖拽到舒适的位置，位置会记住
3. **搜索过滤**：使用搜索框快速找到特定记录
4. **定期清理**：定期清空不需要的历史记录

## ❓ 常见问题

### Q: 面板没有出现？

A: 确保在国服交易页面（poe.game.qq.com/trade2），刷新页面或点击插件图标

### Q: 搜索没有记录？

A: 确保进行了实际的搜索操作，不是仅仅打开页面

### Q: 如何备份历史记录？

A: 数据保存在 Chrome 本地，可通过 Chrome 用户数据备份

## 🎮 享受交易体验

现在你可以像使用 Better Trading 一样，享受便捷的搜索历史管理功能了！

---

**提示**：如果遇到任何问题，可以查看浏览器控制台的日志信息，或重新加载插件。
