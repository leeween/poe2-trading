# 收藏功能测试指南

## 🔧 问题解决

刚刚修复了一个关键问题：**面板 ID 冲突**导致 tab 标签无法显示。

### 修复内容：

1. **主面板 ID 更改**：从 `poe2-history-panel` 改为 `poe2-main-panel`
2. **CSS 选择器更新**：更新所有相关的 CSS 选择器
3. **布局优化**：确保 tab 系统正常显示

## 🧪 测试步骤

### 1. 重新加载插件

```
1. 打开 chrome://extensions/
2. 找到 "POE2 交易市场助手"
3. 点击刷新按钮 🔄
```

### 2. 访问交易页面

```
https://poe.game.qq.com/trade2/search/poe2/深渊崛起/任意搜索ID
```

### 3. 检查 Tab 显示

-   [ ] 应该能看到两个标签：**搜索历史** | **收藏**
-   [ ] 默认选中"搜索历史"标签
-   [ ] 点击"收藏"标签能正常切换

### 4. 测试收藏功能

-   [ ] 点击"收藏"标签
-   [ ] 看到两个按钮：📁 新建文件夹 | ⭐ 收藏当前搜索
-   [ ] 点击"新建文件夹"，输入名称，创建成功
-   [ ] 点击"收藏当前搜索"，输入名称，收藏成功

### 5. 测试数据持久化

-   [ ] 刷新页面，收藏数据仍然存在
-   [ ] 切换到其他页面再回来，数据正常

## 🎯 预期效果

### Tab 标签外观：

```
┌─────────────────────────────────────┐
│ ⚖ POE2 国服交易助手          ↻  ✕  │
├─────────────────────────────────────┤
│ [搜索历史] │ 收藏               │  <- 这里应该有两个tab
├─────────────────────────────────────┤
│ 搜索历史内容...                     │
└─────────────────────────────────────┘
```

### 收藏页面外观：

```
┌─────────────────────────────────────┐
│ 搜索历史 │ [收藏]                   │
├─────────────────────────────────────┤
│ [📁 新建文件夹] [⭐ 收藏当前搜索]    │
├─────────────────────────────────────┤
│ 📁 我的文件夹                  ▼   │
│   ├─ 收藏项1                       │
│   └─ 收藏项2                       │
│ 收藏项3（未分类）                   │
└─────────────────────────────────────┘
```

## 🐛 如果还是没有显示 tab

请检查浏览器控制台：

1. 按 F12 打开开发者工具
2. 查看 Console 标签
3. 寻找任何错误信息
4. 截图发给我分析

## 💡 调试技巧

在控制台运行以下代码检查元素：

```javascript
// 检查主面板是否存在
console.log('主面板:', document.getElementById('poe2-main-panel'))

// 检查tab按钮是否存在
console.log('Tab按钮:', document.querySelectorAll('.poe2-tab-btn'))

// 检查CSS是否加载
console.log('CSS样式:', getComputedStyle(document.querySelector('.poe2-tabs')))
```
