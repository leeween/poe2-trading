# 文件夹导出导入功能说明

## 功能概述

POE2 交易助手新增了文件夹导出导入功能，允许用户将收藏的文件夹分享给其他用户，实现收藏内容的快速传播和同步。

## 技术实现

### 压缩算法

-   使用 **LZ-String** 压缩算法，专门为 JavaScript 字符串优化
-   对 JSON 数据具有出色的压缩效果，通常可达到 60-80%的压缩率
-   压缩后使用 Base64 编码，确保数据可以安全传输和复制

### 数据格式

导出的数据包含以下信息：

```json
{
  "version": "1.0.0",
  "type": "poe2-trading-folder",
  "timestamp": 1640995200000,
  "folder": {
    "name": "文件夹名称",
    "items": [...],
    "exportedAt": "2023-12-31T12:00:00.000Z",
    "totalItems": 10
  }
}
```

## 使用方法

### 导出文件夹

1. **找到目标文件夹**

    - 在"收藏"标签页中找到要导出的文件夹

2. **点击导出按钮**

    - 点击文件夹右上角的"📤"导出按钮

3. **复制导入代码**

    - 弹出简洁的导出对话框
    - 点击"📋 复制代码"按钮将导入代码复制到剪贴板

4. **分享给其他用户**
    - 将导入代码发送给其他用户

### 导入文件夹

1. **打开导入界面**

    - 在"收藏"标签页点击"📥 导入文件夹"按钮

2. **输入导入代码**

    - 弹出简洁的导入对话框
    - 点击"📋 粘贴"从剪贴板自动粘贴，或手动粘贴导入代码

3. **确认导入**

    - 点击"📥 导入"按钮
    - 系统会自动解压和验证数据

4. **查看导入结果**
    - 导入成功后会显示详细统计信息
    - 自动刷新收藏列表显示新内容

## 智能处理机制

### 重复检查

-   自动检测同名文件夹，智能合并内容
-   基于 URL 去重，避免重复收藏项
-   显示详细的导入统计（新增项、重复项）

### 错误处理

-   验证导入数据格式的有效性
-   提供详细的错误提示信息
-   导入失败时不会影响现有数据

### 用户友好

-   实时显示压缩率和文件大小
-   一键复制功能，支持现代剪贴板 API
-   自动文件下载，包含完整的导出信息

## 安全性

### 数据验证

-   严格验证导入数据的类型标识
-   检查数据结构的完整性
-   防止恶意数据注入

### 隔离性

-   导入操作不会覆盖现有数据
-   失败时自动回滚，保护用户数据
-   每个导入项都有独立的 ID

## 使用场景

### 团队协作

-   公会成员分享优质搜索配置
-   新手快速获得经验丰富的搜索模板
-   不同角色间的装备搜索分享

### 个人备份

-   重要收藏的备份和恢复
-   跨设备同步收藏内容
-   版本升级时的数据迁移

### 社区分享

-   论坛、群组中分享精品收藏
-   攻略作者提供配套搜索模板
-   经济分析师分享市场监控配置

## 性能优化

### 压缩效果

-   典型文件夹（20 个收藏项）：原始大小约 8KB，压缩后约 2KB
-   大型文件夹（100 个收藏项）：原始大小约 40KB，压缩后约 10KB
-   压缩率通常在 70-80%之间

### 传输优化

-   Base64 编码确保文本安全传输
-   支持大文件分块处理（未来版本）
-   自动压缩级别调整

## 注意事项

1. **数据兼容性**

    - 只支持相同版本插件间的导入导出
    - 建议定期更新插件版本

2. **文件大小限制**

    - 单个文件夹建议不超过 1000 个收藏项
    - 过大的数据可能影响导入性能

3. **隐私保护**

    - 导出的数据包含搜索历史信息
    - 分享前请确认不包含敏感内容

4. **网络要求**
    - 导入导出功能需要访问 Chrome 存储 API
    - 确保插件有足够的存储权限

## 未来计划

-   [ ] 支持批量导出多个文件夹
-   [ ] 添加导出密码保护功能
-   [ ] 实现云端同步服务
-   [ ] 提供导出数据的可视化预览
-   [ ] 支持增量导入和同步

---

这个功能大大提升了 POE2 交易助手的实用性，让用户能够轻松分享和获取优质的搜索配置，促进社区知识的传播和积累。
